!function(e,t,n){e.fn.jScrollPane=function(t){function i(t,i){function o(i){var r,c,p,u,d,j,g=!1,v=!1;if(G=i,q===n)d=t.scrollTop(),j=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),V=t.innerWidth()+bt,E=t.innerHeight(),t.width(V),q=e('<div class="jspPane" />').css("padding",mt).append(t.children()),O=e('<div class="jspContainer" />').css({width:V+"px",height:E+"px"}).append(q).appendTo(t);else{if(t.css("width",""),g=G.stickToBottom&&H(),v=G.stickToRight&&S(),u=t.innerWidth()+bt!=V||t.outerHeight()!=E,u&&(V=t.innerWidth()+bt,E=t.innerHeight(),O.css({width:V+"px",height:E+"px"})),!u&&wt==N&&q.outerHeight()==K)return void t.width(V);wt=N,q.css("width",""),t.width(V),O.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}q.css("overflow","auto"),N=i.contentWidth?i.contentWidth:q[0].scrollWidth,K=q[0].scrollHeight,q.css("overflow",""),Q=N/V,U=K/E,$=U>1,J=Q>1,J||$?(t.addClass("jspScrollable"),r=G.maintainPosition&&(et||it),r&&(c=B(),p=D()),s(),a(),l(),r&&(C(v?N-V:c,!1),y(g?K-E:p,!1)),x(),P(),L(),G.enableKeyboardNavigation&&M(),G.clickOnTrack&&f(),R(),G.hijackInternalLinks&&I()):(t.removeClass("jspScrollable"),q.css({top:0,width:O.width()-bt}),A(),Y(),X(),h(),z()),G.autoReinitialise&&!vt?vt=setInterval(function(){o(G)},G.autoReinitialiseDelay):!G.autoReinitialise&&vt&&clearInterval(vt),d&&t.scrollTop(0)&&y(d,!1),j&&t.scrollLeft(0)&&C(j,!1),t.trigger("jsp-initialised",[J||$])}function s(){$&&(O.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ot=O.find(">.jspVerticalBar"),st=ot.find(">.jspTrack"),Z=st.find(">.jspDrag"),G.showArrows&&(lt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",u(0,-1)).bind("click.jsp",W),pt=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",u(0,1)).bind("click.jsp",W),G.arrowScrollOnHover&&(lt.bind("mouseover.jsp",u(0,-1,lt)),pt.bind("mouseover.jsp",u(0,1,pt))),p(st,G.verticalArrowPositions,lt,pt)),at=E,O.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",W),Z.addClass("jspActive");var n=t.pageY-Z.position().top;return e("html").bind("mousemove.jsp",function(e){g(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),r())}function r(){st.height(at+"px"),et=0,rt=G.verticalGutter+st.outerWidth(),q.width(V-rt-bt);try{0===ot.position().left&&q.css("margin-left",rt+"px")}catch(e){}}function a(){J&&(O.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ut=O.find(">.jspHorizontalBar"),dt=ut.find(">.jspTrack"),tt=dt.find(">.jspDrag"),G.showArrows&&(jt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",u(-1,0)).bind("click.jsp",W),gt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",u(1,0)).bind("click.jsp",W),G.arrowScrollOnHover&&(jt.bind("mouseover.jsp",u(-1,0,jt)),gt.bind("mouseover.jsp",u(1,0,gt))),p(dt,G.horizontalArrowPositions,jt,gt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",W),tt.addClass("jspActive");var n=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){m(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),ft=O.innerWidth(),c())}function c(){O.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ft-=e(this).outerWidth()}),dt.width(ft+"px"),it=0}function l(){if(J&&$){var t=dt.outerHeight(),n=st.outerWidth();at-=t,e(ut).find(">.jspCap:visible,>.jspArrow").each(function(){ft+=e(this).outerWidth()}),ft-=n,E-=n,V-=t,dt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),r(),c()}J&&q.width(O.outerWidth()-bt+"px"),K=q.outerHeight(),U=K/E,J&&(ht=Math.ceil(1/Q*ft),ht>G.horizontalDragMaxWidth?ht=G.horizontalDragMaxWidth:ht<G.horizontalDragMinWidth&&(ht=G.horizontalDragMinWidth),tt.width(ht+"px"),nt=ft-ht,b(it)),$&&(ct=Math.ceil(1/U*at),ct>G.verticalDragMaxHeight?ct=G.verticalDragMaxHeight:ct<G.verticalDragMinHeight&&(ct=G.verticalDragMinHeight),Z.height(ct+"px"),_=at-ct,v(et))}function p(e,t,n,i){var o,s="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?r=t:t==r&&(s=t,o=n,n=i,i=o),e[s](n)[r](i)}function u(e,t,n){return function(){return d(e,t,this,n),this.blur(),!1}}function d(t,n,i,o){i=e(i).addClass("jspActive");var s,r,a=!0,c=function(){0!==t&&kt.scrollByX(t*G.arrowButtonSpeed),0!==n&&kt.scrollByY(n*G.arrowButtonSpeed),r=setTimeout(c,a?G.initialDelay:G.arrowRepeatFreq),a=!1};c(),s=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(s,function(){i.removeClass("jspActive"),r&&clearTimeout(r),r=null,o.unbind(s)})}function f(){h(),$&&st.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageY-s.top-et,a=!0,c=function(){var e=o.offset(),n=t.pageY-e.top-ct/2,s=E*G.scrollPagePercent,p=_*s/(K-E);if(0>r)et-p>n?kt.scrollByY(-s):g(n);else{if(!(r>0))return void l();n>et+p?kt.scrollByY(s):g(n)}i=setTimeout(c,a?G.initialDelay:G.trackClickRepeatFreq),a=!1},l=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}}),J&&dt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageX-s.left-it,a=!0,c=function(){var e=o.offset(),n=t.pageX-e.left-ht/2,s=V*G.scrollPagePercent,p=nt*s/(N-V);if(0>r)it-p>n?kt.scrollByX(-s):m(n);else{if(!(r>0))return void l();n>it+p?kt.scrollByX(s):m(n)}i=setTimeout(c,a?G.initialDelay:G.trackClickRepeatFreq),a=!1},l=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}})}function h(){dt&&dt.unbind("mousedown.jsp"),st&&st.unbind("mousedown.jsp")}function j(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function g(e,t){$&&(0>e?e=0:e>_&&(e=_),t===n&&(t=G.animateScroll),t?kt.animate(Z,"top",e,v):(Z.css("top",e),v(e)))}function v(e){e===n&&(e=Z.position().top),O.scrollTop(0),et=e;var i=0===et,o=et==_,s=e/_,r=-s*(K-E);(yt!=i||Tt!=o)&&(yt=i,Tt=o,t.trigger("jsp-arrow-change",[yt,Tt,Ct,Bt])),w(i,o),q.css("top",r),t.trigger("jsp-scroll-y",[-r,i,o]).trigger("scroll")}function m(e,t){J&&(0>e?e=0:e>nt&&(e=nt),t===n&&(t=G.animateScroll),t?kt.animate(tt,"left",e,b):(tt.css("left",e),b(e)))}function b(e){e===n&&(e=tt.position().left),O.scrollTop(0),it=e;var i=0===it,o=it==nt,s=e/nt,r=-s*(N-V);(Ct!=i||Bt!=o)&&(Ct=i,Bt=o,t.trigger("jsp-arrow-change",[yt,Tt,Ct,Bt])),k(i,o),q.css("left",r),t.trigger("jsp-scroll-x",[-r,i,o]).trigger("scroll")}function w(e,t){G.showArrows&&(lt[e?"addClass":"removeClass"]("jspDisabled"),pt[t?"addClass":"removeClass"]("jspDisabled"))}function k(e,t){G.showArrows&&(jt[e?"addClass":"removeClass"]("jspDisabled"),gt[t?"addClass":"removeClass"]("jspDisabled"))}function y(e,t){var n=e/(K-E);g(n*_,t)}function C(e,t){var n=e/(N-V);m(n*nt,t)}function T(t,n,i){var o,s,r,a,c,l,p,u,d,f=0,h=0;try{o=e(t)}catch(j){return}for(s=o.outerHeight(),r=o.outerWidth(),O.scrollTop(0),O.scrollLeft(0);!o.is(".jspPane");)if(f+=o.position().top,h+=o.position().left,o=o.offsetParent(),/^body|html$/i.test(o[0].nodeName))return;a=D(),l=a+E,a>f||n?u=f-G.verticalGutter:f+s>l&&(u=f-E+s+G.verticalGutter),u&&y(u,i),c=B(),p=c+V,c>h||n?d=h-G.horizontalGutter:h+r>p&&(d=h-V+r+G.horizontalGutter),d&&C(d,i)}function B(){return-q.position().left}function D(){return-q.position().top}function H(){var e=K-E;return e>20&&e-D()<10}function S(){var e=N-V;return e>20&&e-B()<10}function P(){O.unbind(Ht).bind(Ht,function(e,t,n,i){var o=it,s=et;return kt.scrollBy(n*G.mouseWheelSpeed,-i*G.mouseWheelSpeed,!1),o==it&&s==et})}function A(){O.unbind(Ht)}function W(){return!1}function x(){q.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){T(e.target,!1)})}function Y(){q.find(":input,a").unbind("focus.jsp")}function M(){function n(){var e=it,t=et;switch(i){case 40:kt.scrollByY(G.keyboardSpeed,!1);break;case 38:kt.scrollByY(-G.keyboardSpeed,!1);break;case 34:case 32:kt.scrollByY(E*G.scrollPagePercent,!1);break;case 33:kt.scrollByY(-E*G.scrollPagePercent,!1);break;case 39:kt.scrollByX(G.keyboardSpeed,!1);break;case 37:kt.scrollByX(-G.keyboardSpeed,!1)}return o=e!=it||t!=et}var i,o,s=[];J&&s.push(ut[0]),$&&s.push(ot[0]),q.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||s.length&&e(t.target).closest(s).length){var r=it,a=et;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=t.keyCode,n();break;case 35:y(K-E),i=null;break;case 36:y(0),i=null}return o=t.keyCode==i&&r!=it||a!=et,!o}}).bind("keypress.jsp",function(e){return e.keyCode==i&&n(),!o}),G.hideFocus?(t.css("outline","none"),"hideFocus"in O[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in O[0]&&t.attr("hideFocus",!1))}function X(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function R(){if(location.hash&&location.hash.length>1){var t,n,i=escape(location.hash);try{t=e(i)}catch(o){return}t.length&&q.find(i)&&(0===O.scrollTop()?n=setInterval(function(){O.scrollTop()>0&&(T(i,!0),e(document).scrollTop(O.position().top),clearInterval(n))},50):(T(i,!0),e(document).scrollTop(O.position().top)))}}function z(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function I(){z(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e,t=this.href.split("#");return t.length>1&&(e=t[1],e.length>0&&q.find("#"+e).length>0)?(T("#"+e,!0),!1):void 0})}function L(){var e,t,n,i,o,s=!1;O.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var a=r.originalEvent.touches[0];e=B(),t=D(),n=a.pageX,i=a.pageY,o=!1,s=!0}).bind("touchmove.jsp",function(r){if(s){var a=r.originalEvent.touches[0],c=it,l=et;return kt.scrollTo(e+n-a.pageX,t+i-a.pageY),o=o||Math.abs(n-a.pageX)>5||Math.abs(i-a.pageY)>5,c==it&&l==et}}).bind("touchend.jsp",function(){s=!1}).bind("click.jsp-touchclick",function(){return o?(o=!1,!1):void 0})}function F(){var e=D(),n=B();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(Dt.append(q.children())),Dt.scrollTop(e),Dt.scrollLeft(n)}var G,q,V,E,O,N,K,Q,U,$,J,Z,_,et,tt,nt,it,ot,st,rt,at,ct,lt,pt,ut,dt,ft,ht,jt,gt,vt,mt,bt,wt,kt=this,yt=!0,Ct=!0,Tt=!1,Bt=!1,Dt=t.clone(!1,!1).empty(),Ht=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";mt=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),bt=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(kt,{reinitialise:function(t){t=e.extend({},G,t),o(t)},scrollToElement:function(e,t,n){T(e,t,n)},scrollTo:function(e,t,n){C(e,n),y(t,n)},scrollToX:function(e,t){C(e,t)},scrollToY:function(e,t){y(e,t)},scrollToPercentX:function(e,t){C(e*(N-V),t)},scrollToPercentY:function(e,t){y(e*(K-E),t)},scrollBy:function(e,t,n){kt.scrollByX(e,n),kt.scrollByY(t,n)},scrollByX:function(e,t){var n=B()+Math[0>e?"floor":"ceil"](e),i=n/(N-V);m(i*nt,t)},scrollByY:function(e,t){var n=D()+Math[0>e?"floor":"ceil"](e),i=n/(K-E);g(i*_,t)},positionDragX:function(e,t){m(e,t)},positionDragY:function(e,t){g(e,t)},animate:function(e,t,n,i){var o={};o[t]=n,e.animate(o,{duration:G.animateDuration,ease:G.animateEase,queue:!1,step:i})},getContentPositionX:function(){return B()},getContentPositionY:function(){return D()},getContentWidth:function(){return N},getContentHeight:function(){return K},getPercentScrolledX:function(){return B()/(N-V)},getPercentScrolledY:function(){return D()/(K-E)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return $},getContentPane:function(){return q},scrollToBottom:function(e){g(_,e)},hijackInternalLinks:function(){I()},destroy:function(){F()}}),o(i)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),o=n.data("jsp");o?o.reinitialise(t):(o=new i(n,t),n.data("jsp",o))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);